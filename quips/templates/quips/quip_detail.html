{% extends "base.html" %}
{% load static %}
{% load typogrify_tags %}
{% load quips_extras %}

{% block title %}Quipped on {{ object.date}}{% endblock %}
{% block css %}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link href="{% static 'css/quips-basicblue.css' %}" rel="stylesheet">
{% endblock %}
{% block angular %}{% endblock angular %}

{% block navbar %}{% endblock navbar %}
{% block content %}
{% autoescape off %}
<div>
  <div class="row">
    <div class="quip">
      {% for quote in object.quotes.all %}
      {% if quote.is_slash_me %}
      <blockquote class="action">
        <p>
          {% if quote.speaker.should_obfuscate %}
          {{ quote.speaker.name|obfuscate_name }}
          {% else %}
          {{ quote.speaker.name }}
          {% endif %}
          {{ quote|typogrify }}
        </p>
      </blockquote>
      {% else %}
      <blockquote>
        <p>{{ quote|typogrify }}</p>
        <footer class="text-right"><cite>
          {% if quote.speaker.should_obfuscate %}
          {{ quote.speaker.name|obfuscate_name|typogrify }}
          {% else %}
          {{ quote.speaker.name|typogrify }}
          {% endif %}
        </cite></footer>
      </blockquote>
      {% endif %}
      {% endfor %}
    </div>
  </div>
  <p class="text-center quip-date">
    {{ object.date }}
    <a href="{% url 'quips:detail' quip.uuid %}" class="quip-link" title="Permalink to this quip"><span class="glyphicon glyphicon-link"></span></a>
  </p>
  {% if object.context %}<p class="text-center quip-context">{{ object.context|typogrify }}</p>{% endif %}
</div>
{% endautoescape %}
{% endblock content %}

{% block footer %}
<a href="{% url 'quips:random' %}"><span class="glyphicon glyphicon-fire randomizer"></span></a>
{% endblock footer %}

{% block javascript %}
    <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
{% endblock %}
